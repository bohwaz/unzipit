/* unzipit@1.2.0, license MIT */
'use strict';(function(v,B){"object"===typeof exports&&"undefined"!==typeof module?B(exports):"function"===typeof define&&define.amd?define(["exports"],B):(v=v||self,B(v.unzipit={}))})(this,function(v){function B(a){return a.arrayBuffer?a.arrayBuffer():new Promise((b,c)=>{const e=new FileReader;e.addEventListener("loadend",()=>{b(e.result)});e.addEventListener("error",c);e.readAsArrayBuffer(a)})}async function ea(a){a=await B(a);return new Uint8Array(a)}function R(a){return"undefined"!==typeof Blob&&
a instanceof Blob}function D(a){return"undefined"!==typeof SharedArrayBuffer&&a instanceof SharedArrayBuffer}function L(a,b){var c=a.length;if(b<=c)return a;b=new Uint8Array(Math.max(c<<1,b));b.set(a,0);return b}function fa(a,b,c,e,d,f){for(var k=S,g=T,h=0;h<c;){var n=a[g(e,d)&b];d+=n&15;var l=n>>>4;if(15>=l)f[h]=l,h++;else{var t=n=0;16==l?(t=3+k(e,d,2),d+=2,n=f[h-1]):17==l?(t=3+k(e,d,3),d+=3):18==l&&(t=11+k(e,d,7),d+=7);for(l=h+t;h<l;)f[h]=n,h++}}return d}function U(a,b,c,e){for(var d=0,f=0,k=e.length>>>
1;f<c;){var g=a[f+b];e[f<<1]=0;e[(f<<1)+1]=g;g>d&&(d=g);f++}for(;f<k;)e[f<<1]=0,e[(f<<1)+1]=0,f++;return d}function E(a,b){var c=a.length,e,d;var h=f.bl_count;for(d=0;d<=b;d++)h[d]=0;for(d=1;d<c;d+=2)h[a[d]]++;d=f.next_code;var k=0;h[0]=0;for(e=1;e<=b;e++)k=k+h[e-1]<<1,d[e]=k;for(b=0;b<c;b+=2)h=a[b+1],0!=h&&(a[b]=d[h],d[h]++)}function F(a,b,c){for(var e=a.length,d=f.rev15,h=0;h<e;h+=2)if(0!=a[h+1]){var k=a[h+1],g=h>>1<<4|k,z=b-k;k=a[h]<<z;for(z=k+(1<<z);k!=z;)c[d[k]>>>15-b]=g,k++}}function V(a,b){for(var c=
f.rev15,e=15-b,d=0;d<a.length;d+=2)a[d]=c[a[d]<<b-a[d+1]]>>>e}function S(a,b,c){return(a[b>>>3]|a[(b>>>3)+1]<<8)>>>(b&7)&(1<<c)-1}function ia(a,b,c){return(a[b>>>3]|a[(b>>>3)+1]<<8|a[(b>>>3)+2]<<16)>>>(b&7)&(1<<c)-1}function T(a,b){return(a[b>>>3]|a[(b>>>3)+1]<<8|a[(b>>>3)+2]<<16)>>>(b&7)}function ja(a){x.push(a.target);M();const {id:b,error:c,data:e}=a.data;a=H.get(b);H.delete(b);c?a.reject(c):a.resolve(e)}function N(a){return new Promise((b,c)=>{const e=new Worker(a);e.onmessage=a=>{"start"===a.data?
(e.onerror=void 0,e.onmessage=void 0,b(e)):c(Error(`unexpected message: ${a.data}`))};e.onerror=c})}async function ka(){if(0===x.length&&O<r.numWorkers){++O;try{const a=await P.createWorker(r.workerURL);I.push(a);x.push(a);P.addEventListener(a,ja)}catch(a){J=!1}}return x.pop()}async function M(){if(0!==A.length){if(r.useWorkers&&J){var a=await ka();if(J){if(a){if(0===A.length){x.push(a);M();return}const {id:b,src:c,uncompressedSize:d,type:e,resolve:g,reject:f}=A.shift();H.set(b,{id:b,resolve:g,reject:f});
a.postMessage({type:"inflate",data:{id:b,type:e,src:c,uncompressedSize:d}},[])}return}}for(;A.length;){const {src:n,uncompressedSize:r,type:ha,resolve:x}=A.shift();a=n;R(n)&&(a=await ea(n));{var b=a;a=ha;var c=x;const n=new Uint8Array(r);var e=void 0,d=void 0,h,k=n,g=Uint8Array;if(3==b[0]&&0==b[1])k||new g(0);else{var z=ia,l=S,t=fa,v=T,K=null==k;K&&(k=new g(b.length>>>2<<3));for(var W=0,y=0,u=h=0,m=0;0==W;){W=z(b,m,1);var q=z(b,m+1,2);m+=3;if(0==q)0!=(m&7)&&(m+=8-(m&7)),m=(m>>>3)+4,q=b[m-4]|b[m-3]<<
8,K&&(k=L(k,u+q)),k.set(new g(b.buffer,b.byteOffset+m,q),u),m=m+q<<3,u+=q;else{K&&(k=L(k,u+131072));1==q&&(d=f.flmap,e=f.fdmap,y=511,h=31);if(2==q){q=l(b,m,5)+257;h=l(b,m+5,5)+1;e=l(b,m+10,4)+4;m+=14;for(d=0;38>d;d+=2)f.itree[d]=0,f.itree[d+1]=0;y=1;for(d=0;d<e;d++){var p=l(b,m+3*d,3);f.itree[(f.ordr[d]<<1)+1]=p;p>y&&(y=p)}m+=3*e;E(f.itree,y);F(f.itree,y,f.imap);d=f.lmap;e=f.dmap;m=t(f.imap,(1<<y)-1,q+h,b,m,f.ttree);p=U(f.ttree,0,q,f.ltree);y=(1<<p)-1;q=U(f.ttree,q,h,f.dtree);h=(1<<q)-1;E(f.ltree,
p);F(f.ltree,p,d);E(f.dtree,q);F(f.dtree,q,e)}for(;;)if(q=d[v(b,m)&y],m+=q&15,p=q>>>4,0==p>>>8)k[u++]=p;else if(256==p)break;else{q=u+p-254;264<p&&(p=f.ldef[p-257],q=u+(p>>>3)+l(b,m,p&7),m+=p&7);p=e[v(b,m)&h];m+=p&15;p=f.ddef[p>>>4];var w=(p>>>4)+z(b,m,p&15);m+=p&15;for(K&&(k=L(k,u+131072));u<q;)k[u]=k[u++-w],k[u]=k[u++-w],k[u]=k[u++-w],k[u]=k[u++-w];u=q}}}k.length==u||k.slice(0,u)}c(a?new Blob([n],{type:a}):n.buffer)}}}}function X(a,b,c){return new Promise((e,d)=>{A.push({src:a,uncompressedSize:b,
type:c,resolve:e,reject:d,id:la++});M()})}async function ma(){for(const a of I)await P.terminate(a);I.splice(0,I.length);x.splice(0,x.length);A.splice(0,A.length);H.clear();O=0;J=!0}async function C(a,b,c){return await a.read(b,c)}async function Q(a,b,c,e){return a.sliceAsBlob?await a.sliceAsBlob(b,c,e):await a.read(b,c)}function l(a,b){return a[b]+256*a[b+1]}function t(a,b){return a[b]+256*a[b+1]+65536*a[b+2]+16777216*a[b+3]}function w(a,b){return t(a,b)+4294967296*t(a,b+4)}function G(a,b){D(a.buffer)&&
(a=new Uint8Array(a));return na.decode(a)}async function oa(a,b){var c=Math.min(65557,b);b-=c;var e=await C(a,b,c);for(c-=22;0<=c;--c){if(101010256!==t(e,c))continue;var d=new Uint8Array(e.buffer,e.byteOffset+c,e.byteLength-c);e=l(d,4);if(0!==e)throw Error(`multi-volume zip files are not supported. This is volume: ${e}`);e=l(d,10);const k=t(d,12),g=t(d,16);var f=l(d,20);const h=d.length-22;if(f!==h)throw Error(`invalid comment length. expected: ${h}, actual: ${f}`);d=new Uint8Array(d.buffer,d.byteOffset+
22,f);f=G(d);return 65535===e||4294967295===g?await pa(a,b+c,f,d):await Y(a,g,k,e,f,d)}throw Error("could not find end of central directory. maybe not zip file");}async function pa(a,b,c,e){b=await C(a,b-20,20);if(117853008!==t(b,0))throw Error("invalid zip64 end of central directory locator signature");b=w(b,8);var d=C(a,b,56);if(101010256!==t(d,0))throw Error("invalid zip64 end of central directory record signature");b=w(d,32);const f=w(d,40);d=w(d,48);return Y(a,d,f,b,c,e)}async function Y(a,b,
c,e,d,f){let k=0;b=await C(a,b,c);c=[];for(let a=0;a<e;++a){var g=b.subarray(k,k+46),h=t(g,0);if(33639248!==h)throw Error(`invalid central directory file header signature: 0x${h.toString(16)}`);g={versionMadeBy:l(g,4),versionNeededToExtract:l(g,6),generalPurposeBitFlag:l(g,8),compressionMethod:l(g,10),lastModFileTime:l(g,12),lastModFileDate:l(g,14),crc32:t(g,16),compressedSize:t(g,20),uncompressedSize:t(g,24),fileNameLength:l(g,28),extraFieldLength:l(g,30),fileCommentLength:l(g,32),internalFileAttributes:l(g,
36),externalFileAttributes:t(g,38),relativeOffsetOfLocalHeader:t(g,42)};if(g.generalPurposeBitFlag&64)throw Error("strong encryption is not supported");k+=46;h=b.subarray(k,k+g.fileNameLength+g.extraFieldLength+g.fileCommentLength);g.nameBytes=h.slice(0,g.fileNameLength);g.name=G(g.nameBytes);var n=g.fileNameLength+g.extraFieldLength;const a=h.slice(g.fileNameLength,n);g.extraFields=[];for(var r=0;r<a.length-3;){const b=l(a,r+0);var v=l(a,r+2);r+=4;v=r+v;if(v>a.length)throw Error("extra field length exceeds extra field buffer size");
g.extraFields.push({id:b,data:a.slice(r,v)});r=v}g.commentBytes=h.slice(n,n+g.fileCommentLength);g.comment=G(g.commentBytes);k+=h.length;if(4294967295===g.uncompressedSize||4294967295===g.compressedSize||4294967295===g.relativeOffsetOfLocalHeader){h=g.extraFields.find(a=>1===a.id);if(!h)return Error("expected zip64 extended information extra field");h=h.data;n=0;if(4294967295===g.uncompressedSize){if(n+8>h.length)throw Error("zip64 extended information extra field does not include uncompressed size");
g.uncompressedSize=w(h,n);n+=8}if(4294967295===g.compressedSize){if(n+8>h.length)throw Error("zip64 extended information extra field does not include compressed size");g.compressedSize=w(h,n);n+=8}if(4294967295===g.relativeOffsetOfLocalHeader){if(n+8>h.length)throw Error("zip64 extended information extra field does not include relative header offset");g.relativeOffsetOfLocalHeader=w(h,n);n+=8}}if(h=g.extraFields.find(a=>28789===a.id&&6<=a.data.length&&1===a.data[0]&&t(a.data,1),qa.unsigned(g.nameBytes)))g.fileName=
G(h.data.slice(5));if(0===g.compressionMethod&&(h=g.uncompressedSize,0!==(g.generalPurposeBitFlag&1)&&(h+=12),g.compressedSize!==h))throw Error(`compressed/uncompressed size mismatch for stored file: ${g.compressedSize} != ${g.uncompressedSize}`);c.push(g)}return{zip:{comment:d,commentBytes:f},entries:c.map(b=>new ra(a,b))}}async function Z(a,b){var c=await C(a,b.relativeOffsetOfLocalHeader,30);a=await a.getLength();var e=t(c,0);if(67324752!==e)throw Error(`invalid local file header signature: 0x${e.toString(16)}`);
e=l(c,26);var d=l(c,28);c=b.relativeOffsetOfLocalHeader+c.length+e+d;if(0===b.compressionMethod)e=!1;else if(8===b.compressionMethod)e=!0;else throw Error(`unsupported compression method: ${b.compressionMethod}`);d=c+b.compressedSize;if(0!==b.compressedSize&&d>a)throw Error(`file data overflows file bounds: ${c} +  ${b.compressedSize}  > ${a}`);return{decompress:e,fileDataStart:c}}async function sa(a,b){const {decompress:c,fileDataStart:e}=await Z(a,b);if(!c)return b=await C(a,e,b.compressedSize),
0===b.byteOffset&&b.byteLength===b.buffer.byteLength?b.buffer:b.slice().buffer;a=await Q(a,e,b.compressedSize);return await X(a,b.uncompressedSize)}async function ta(a,b,c){const {decompress:e,fileDataStart:d}=await Z(a,b);if(!e)return b=await Q(a,d,b.compressedSize,c),R(b)?b:new Blob([D(b.buffer)?new Uint8Array(b):b],{type:c});a=await Q(a,d,b.compressedSize);return await X(a,b.uncompressedSize,c)}async function aa(a){if("undefined"!==typeof Blob&&a instanceof Blob)a=new ba(a);else if(a instanceof
ArrayBuffer||a&&a.buffer&&a.buffer instanceof ArrayBuffer)a=new ca(a);else if(D(a)||D(a.buffer))a=new ca(a);else if("string"===typeof a)a=await (await fetch(a)).blob(),a=new ba(a);else if("function"!==typeof a.getLength||"function"!==typeof a.read)throw Error("unsupported source type");const b=await a.getLength();if(b>Number.MAX_SAFE_INTEGER)throw Error(`file too large. size: ${b}. Only file sizes up 4503599627370496 bytes are supported`);return await oa(a,b)}const ua="undefined"!==typeof process&&
process.versions&&"undefined"!==typeof process.versions.node&&"undefined"===typeof process.versions.electron;class ca{constructor(a){this.typedArray=a instanceof ArrayBuffer||D(a)?new Uint8Array(a):new Uint8Array(a.buffer,a.byteOffset,a.byteLength)}async getLength(){return this.typedArray.byteLength}async read(a,b){return new Uint8Array(this.typedArray.buffer,this.typedArray.byteOffset+a,b)}}class ba{constructor(a){this.blob=a}async getLength(){return this.blob.size}async read(a,b){a=this.blob.slice(a,
a+b);a=await B(a);return new Uint8Array(a)}async sliceAsBlob(a,b,c=""){return this.blob.slice(a,a+b,c)}}class va{constructor(a){this.url=a}async getLength(){if(void 0===this.length){const a=await fetch(this.url,{method:"HEAD"});this.length=parseInt(a.headers.get("content-length"));if(Number.isNaN(this.length))throw Error("could not get length");}return this.length}async read(a,b){a=await (await fetch(this.url,{headers:{Range:`bytes=${a}-${a+b-1}`}})).arrayBuffer();return new Uint8Array(a)}}const f=
function(){var a=Uint16Array,b=Uint32Array;return{next_code:new a(16),bl_count:new a(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new a(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,
7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new b(32),flmap:new a(512),fltree:[],fdmap:new a(32),fdtree:[],lmap:new a(32768),ltree:[],ttree:[],dmap:new a(32768),dtree:[],imap:new a(512),itree:[],rev15:new a(32768),lhst:new b(286),dhst:new b(30),ihst:new b(19),lits:new b(15E3),strt:new a(65536),prev:new a(32768)}}();(function(){function a(a,b,c){for(;0!=b--;)a.push(0,c)}for(var b=0;32768>b;b++){var c=b;c=(c&2863311530)>>>1|(c&1431655765)<<1;c=(c&3435973836)>>>2|(c&858993459)<<2;c=(c&4042322160)>>>
4|(c&252645135)<<4;c=(c&4278255360)>>>8|(c&16711935)<<8;f.rev15[b]=(c>>>16|c<<16)>>>17}for(b=0;32>b;b++)f.ldef[b]=f.of0[b]<<3|f.exb[b],f.ddef[b]=f.df0[b]<<4|f.dxb[b];a(f.fltree,144,8);a(f.fltree,112,9);a(f.fltree,24,7);a(f.fltree,8,8);E(f.fltree,9);F(f.fltree,9,f.flmap);V(f.fltree,9);a(f.fdtree,32,5);E(f.fdtree,5);F(f.fdtree,5,f.fdmap);V(f.fdtree,5);a(f.itree,19,0);a(f.ltree,286,0);a(f.dtree,30,0);a(f.ttree,320,0)})();const da={table:function(){for(var a=new Uint32Array(256),b=0;256>b;b++){for(var c=
b,e=0;8>e;e++)c=c&1?3988292384^c>>>1:c>>>1;a[b]=c}return a}(),update:function(a,b,c,e){for(var d=0;d<e;d++)a=da.table[(a^b[c+d])&255]^a>>>8;return a},crc:function(a,b,c){return da.update(4294967295,a,b,c)^4294967295}},r={numWorkers:1,workerURL:"",useWorkers:!1};let la=0,O=0,J=!0;const I=[],x=[],A=[],H=new Map,P=function(){if(ua){const {Worker:a}=module.require("worker_threads");return{async createWorker(b){return new a(b)},addEventListener(a,c){a.on("message",b=>{c({target:a,data:b})})},async terminate(a){await a.terminate()}}}return{async createWorker(a){try{return await N(a)}catch(c){console.warn("could not load worker:",
a)}let b;try{b=await (await fetch(a,{mode:"cors"})).text();a=URL.createObjectURL(new Blob([b],{type:"application/javascript"}));const c=await N(a);r.workerURL=a;return c}catch(c){console.warn("could not load worker via fetch:",a)}if(void 0!==b)try{a=`data:application/javascript;base64,${btoa(b)}`;const c=await N(a);r.workerURL=a;return c}catch(c){console.warn("could not load worker via dataURI")}console.warn("workers will not be used");throw Error("can not start workers");},addEventListener(a,b){a.addEventListener("message",
b)},async terminate(a){a.terminate()}}}();class ra{constructor(a,b){this._reader=a;this._entry=b;this.name=b.name;this.nameBytes=b.nameBytes;this.size=b.uncompressedSize;this.compressedSize=b.compressedSize;this.comment=b.comment;this.commentBytes=b.commentBytes;this.compressionMethod=b.compressionMethod;a=b.lastModFileDate;var c=b.lastModFileTime;this.lastModDate=new Date((a>>9&127)+1980,(a>>5&15)-1,a&31,c>>11&31,c>>5&63,2*(c&31),0);this.isDirectory=0===b.uncompressedSize&&b.name.endsWith("/")}async blob(a=
"application/octet-stream"){return await ta(this._reader,this._entry,a)}async arrayBuffer(){return await sa(this._reader,this._entry)}async text(){const a=await this.arrayBuffer();return G(new Uint8Array(a))}async json(){const a=await this.text();return JSON.parse(a)}}const qa={unsigned(){return 0}},na=new TextDecoder;v.HTTPRangeReader=va;v.cleanup=function(){ma()};v.setOptions=function(a){r.workerURL=a.workerURL||r.workerURL;a.workerURL&&(r.useWorkers=!0);r.useWorkers=void 0!==a.useWorkers?a.useWorkers:
r.useWorkers;r.numWorkers=a.numWorkers||r.numWorkers};v.unzip=async function(a){const {zip:b,entries:c}=await aa(a);return{zip:b,entries:Object.fromEntries(c.map(a=>[a.name,a]))}};v.unzipRaw=aa;Object.defineProperty(v,"__esModule",{value:!0})});
